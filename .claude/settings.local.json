{
  "permissions": {
    "allow": [
      "Bash(find:*)",
      "Bash(pytest:*)",
      "Bash(python3:*)",
      "Bash(grep:*)",
      "Bash(python -m pytest tests/test_write.py -v)",
      "Bash(python -m pytest --tb=short)",
      "Bash(pip install:*)",
      "Bash(python:*)",
      "Bash(pyright:*)",
      "Bash(flake8:*)",
      "Bash(pandoc:*)",
      "Bash(ls:*)",
      "Bash(sed:*)",
      "Bash(jq:*)",
      "WebFetch(domain:qwenlm.github.io)",
      "WebFetch(domain:raw.githubusercontent.com)",
      "Bash(git add OBSOLETE_*.md)",
      "Bash(git add flowchart.md)",
      "Bash(git commit -m \"$(cat <<''EOF''\nUpdate flowchart.md to match current codebase\n\nMajor changes:\n- Add Resume from State flow at the beginning\n- Add NATIVE_LANGUAGE configuration and dynamic prompt loading\n- Add state management (Save Chapter to State)\n- Add OutputFiles structure creation\n- Add PDF generation flow after JSON save\n- Clarify error handling for PDF generation\n\nFlowchart now accurately reflects the complete pipeline including\nPDF generation feature and state management.\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git log --count --grep=\"EXPAND\" --all)",
      "Bash(cat:*)",
      "Bash(python -m pytest:*)",
      "Bash(python -m pytest tests/writer/test_lorebook.py -v)",
      "Bash(pip install langchain)",
      "Bash(python -m pytest tests/writer/test_lorebook.py::TestLorebookManager::test_lorebook_initialization -xvs)",
      "Bash(pip install 'langchain>=0.1.0' 'langchain-community>=0.0.20' chromadb sentence-transformers)",
      "Bash(python -c \"try:\n    from langchain_community.vectorstores import Chroma\n    from langchain_community.embeddings import HuggingFaceEmbeddings\n    from langchain.docstore.document import Document\n    print(''LangChain imports successful'')\nexcept ImportError as e:\n    print(f''Import error: {e}'')\")",
      "Bash(python -m pytest tests/writer/test_lorebook.py::TestLorebookManager::test_add_single_entry -xvs)",
      "Bash(python -c \"from Writer import Config; print(f''USE_LOREBOOK = {Config.USE_LOREBOOK}'')\")",
      "Bash(python -m pytest tests/writer/test_lorebook.py::TestLorebookManager::test_retrieve_character_information -xvs)",
      "Bash(python -m pytest tests/writer/test_lorebook.py::TestLorebookManager::test_add_single_entry -xvs --disable-warnings)",
      "Bash(python -m pytest tests/writer/test_lorebook.py::TestLorebookManager::test_retrieve_character_information -xvs --disable-warnings)",
      "Bash(python -m pytest tests/writer/test_lorebook.py -v --disable-warnings)",
      "Bash(python -m pytest tests/writer/test_lorebook.py::TestLorebookManager::test_extract_from_outline -xvs --disable-warnings)",
      "Bash(python -m pytest tests/test_write.py -k \"test_full_pipeline\" -xvs --disable-warnings)",
      "Bash(python -m pytest tests/test_write.py --collect-only -q)",
      "Bash(python -c \"\n# Test import and basic functionality\nfrom Writer.Pipeline import StoryPipeline\nfrom Writer.Interface import Wrapper\nfrom Writer.PrintUtils import Logger\nfrom Writer import Config\nfrom Writer import Prompts\n\n# Initialize components\nprint(''Initializing interface...'')\ninterface = Wrapper()\nsys_logger = Logger()\nconfig = Config\nactive_prompts = Prompts\n\nprint(''Creating pipeline...'')\npipeline = StoryPipeline(interface, sys_logger, config, active_prompts)\n\nprint(''Checking lorebook integration...'')\nhas_lorebook = hasattr(pipeline, ''lorebook'') and pipeline.lorebook is not None\nprint(f''Lorebook initialized: {has_lorebook}'')\n\nif has_loorebook:\n    # Test lore is accessible\n    stats = pipeline.lorebook.get_stats()\n    print(f''Lorebook stats: {stats}'')\n\nprint(''Integration test successful!'')\n\")",
      "Bash(python -c \"\n# Test import and basic functionality\nfrom Writer.Pipeline import StoryPipeline\nfrom Writer.Interface import Interface\nfrom Writer.PrintUtils import Logger\nfrom Writer import Config\nfrom Writer import Prompts\n\n# Initialize components\nprint(''Initializing interface...'')\ninterface = Interface([])\nsys_logger = Logger()\nconfig = Config\nactive_prompts = Prompts\n\nprint(''Creating pipeline...'')\npipeline = StoryPipeline(interface, sys_logger, config, active_prompts)\n\nprint(''Checking lorebook integration...'')\nhas_lorebook = hasattr(pipeline, ''lorebook'') and pipeline.lorebook is not None\nprint(f''Lorebook initialized: {has_lorebook}'')\n\nif has_lorebook:\n    # Test lore is accessible\n    stats = pipeline.lorebook.get_stats()\n    print(f''Lorebook stats: {stats}'')\n\nprint(''Integration test successful!'')\n\")",
      "Bash(python -c \"\n# Test import and basic functionality\nfrom Writer.Pipeline import StoryPipeline\nfrom Writer.Interface.Wrapper import Interface\nfrom Writer.PrintUtils import Logger\nfrom Writer import Config\nfrom Writer import Prompts\n\n# Initialize components\nprint(''Initializing interface...'')\ninterface = Interface([])\nsys_logger = Logger()\nconfig = Config\nactive_prompts = Prompts\n\nprint(''Creating pipeline...'')\npipeline = StoryPipeline(interface, sys_logger, config, active_prompts)\n\nprint(''Checking lorebook integration...'')\nhas_lorebook = hasattr(pipeline, ''lorebook'') and pipeline.lorebook is not None\nprint(f''Lorebook initialized: {has_lorebook}'')\n\nif has_lorebook:\n    # Test lore is accessible\n    stats = pipeline.lorebook.get_stats()\n    print(f''Lorebook stats: {stats}'')\n\nprint(''Integration test successful!'')\n\")",
      "Bash(python -m pytest tests/writer/test_lorebook.py -q --disable-warnings)",
      "Bash(python -m pytest tests/test_lorebook_integration.py -v --disable-warnings)",
      "Bash(flake8 Writer/Lorebook.py --ignore=E501,W504,W503)",
      "Bash(git add -A)",
      "Bash(git reset HEAD *.txt*)"
    ],
    "deny": []
  }
}
